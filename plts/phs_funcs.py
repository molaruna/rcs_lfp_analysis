import scipy.signal as signalimport matplotlib.pyplot as pltdef fit_aps(freqs, signal_arr):    local_max_freqs_i = signal.find_peaks(signal_arr)[0]      local_base_signal = get_base(signal_arr, local_max_freqs_i)    plt.semilogy(freqs, signal_arr)    plt.plot(freqs[local_max_freqs_i],signal_arr[local_max_freqs_i], '^')    plt.plot(freqs[local_min_freqs_i],signal_arr[local_min_freqs_i], '+')    plt.show()    def get_base(signal_arr, i):       local_min_freqs_i = signal.find_peaks(-signal_arr)[0]    local_min_freqs_d = np.diff(signal_arr(local_min_freqs_i))    signal_d_infl_i = signal_d[signal_d > 0].index()        